<button data-dojo-type="dijit.form.Button" id="loginBtn" type="button">用户登录
    <script type="dojo/method" data-dojo-event="onClick" data-dojo-args="evt">
        dijit.byId("loginDialog").show();
		var userTypes = dijit.byId("type");
		userTypes.set("store",userTypesStore);
    </script>
</button>
<div data-dojo-type="dijit.Dialog" id="loginDialog" title="用户登录" style="display: none">
    <form data-dojo-type="dijit.form.Form" id="loginForm">
        <script type="dojo/event" data-dojo-event="onSubmit" data-dojo-args="e">
            dojo.stopEvent(e); // prevent the default submit
            if(!this.isValid()){ window.alert('Please fix fields'); return; }								
            dojo.xhrPost( {
            	url: 'login.do',
            	form : "loginForm",
            	handleAs: 'json',
            	load: function(data){
            		if(data["success"]){
				        require(["dojo/dom-style", "dijit/registry"], function(domStyle, registry){
				        	domStyle.set(registry.byId("loginBtn").domNode, "display", "none");
					        domStyle.set(registry.byId("accountManagementBtn").domNode, "display", "");
					        dijit.byId('loginDialog').hide();
						});
            		}else{
            			alert(data["msg"]);
            		}							            		
            	},
            	error: function(data){					            		
				}
            });
        </script>
        <div class="dijitDialogPaneContentArea">								
		    <table style="border: 1px solid #9f9f9f;" cellspacing="10">
				<tr>
		            <td>
		                <label for="type">请选择登录类型:</label>
		            </td>
		            <td>
						<input data-dojo-type="dijit/form/Select" value="" data-dojo-props="labelAttr:'name',valueAttr:'name'" name="type" id="type" data-dojo-attach-point="type"/>
		            </td>
		        </tr>
		        <tr>
		            <td>
		                <label for="account">用户名:</label>
		            </td>
		            <td>
		                <input type="text" id="account" name="account" required="true" data-dojo-type="dijit/form/ValidationTextBox"/>
		            </td>
		        </tr>
		        <tr>
		            <td>
		                <label for="dob">密码:</label>
		            </td>
		            <td>
		                <input type="password" id="password" name="password" data-dojo-type="dijit/form/ValidationTextBox"/>
		            </td>
		        </tr>
		    </table>
        </div>
        <div class="dijitDialogPaneActionBar">
            <button data-dojo-type="dijit.form.Button" type="submit">登录</button>
            <button data-dojo-type="dijit.form.Button" type="button" data-dojo-props="onClick:function(){dijit.byId('loginDialog').hide();}">返回</button>
        </div>
     </form>
</div>